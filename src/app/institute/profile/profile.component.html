<nb-card>
  <nb-card-body>
    <div class="row">
      <div class="col-12">
        <h3 id="title" class="title">User Profile</h3>

        <form (ngSubmit)="saveProfile()" [formGroup]="profileForm">
          <p class="sub-title">Personal Details</p>
          <div class="row">
            <div class="col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-name">User Name:</label>
                <input
                  type="text"
                  nbInput
                  id="input-name"
                  name="name"
                  formControlName="name"
                  placeholder="User Name"
                  minlength="5"
                  maxlength="20"
                  fullWidth
                  [status]="
                    profileForm.get('name').touched
                      ? profileForm.get('name').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="profileForm.get('name').invalid && profileForm.get('name').touched"
                >
                  <p class="caption status-danger" *ngIf="profileForm.get('name').errors?.required">
                    User Name is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="profileForm.get('name').errors?.minlength"
                  >
                    User Name should contain minimum 5 characters
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-phone">User phone:</label>
                <input
                  type="text"
                  pattern="\d*"
                  nbInput
                  id="input-phone"
                  name="phone"
                  formControlName="phone"
                  placeholder="User phone"
                  minlength="10"
                  maxlength="10"
                  fullWidth
                  [status]="
                    profileForm.get('phone').touched
                      ? profileForm.get('phone').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="profileForm.get('phone').invalid && profileForm.get('phone').touched"
                >
                  <p
                    class="caption status-danger"
                    *ngIf="profileForm.get('phone').errors?.required"
                  >
                    User phone is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="
                      profileForm.get('phone').errors?.minlength ||
                      profileForm.get('phone').errors?.maxlength ||
                      profileForm.get('phone').errors?.pattern
                    "
                  >
                    User phone should be 10 digits
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-control-group">
                <label class="label" for="input-address">User Address:</label>
                <textarea
                  type="text"
                  nbInput
                  id="input-address"
                  name="address"
                  formControlName="address"
                  placeholder="User Address"
                  rows="2"
                  minlength="10"
                  maxlength="150"
                  fullWidth
                  [status]="
                    profileForm.get('address').touched
                      ? profileForm.get('address').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                ></textarea>
                <ng-container
                  *ngIf="profileForm.get('address').invalid && profileForm.get('address').touched"
                >
                  <p
                    class="caption status-danger"
                    *ngIf="profileForm.get('address').errors?.required"
                  >
                    User address is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="profileForm.get('address').errors?.minlength"
                  >
                    User address should be 10 characters
                  </p>
                </ng-container>
              </div>
            </div>
          </div>

          <br />

          <div class="row">
            <div class="col-12 text-right">
              <button type="submit" nbButton status="primary">Save Profile</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <hr />

    <div class="row">
      <div class="col-md-12">
        <h3 id="title" class="title">Change password</h3>
        <p class="sub-title">Please set a new password</p>

        <form (ngSubmit)="changePassword()" [formGroup]="changePasswordForm">
          <div class="row">
            <div class="col-md-4">
              <div class="form-control-group">
                <label class="label" for="input-old-password">Old Password:</label>
                <input
                  type="password"
                  nbInput
                  id="input-old-password"
                  name="oldPassword"
                  formControlName="oldPassword"
                  placeholder="Old Password"
                  minlength="7"
                  maxlength="20"
                  fullWidth
                  [status]="
                    changePasswordForm.get('oldPassword').touched
                      ? changePasswordForm.get('oldPassword').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="
                    changePasswordForm.get('oldPassword').invalid &&
                    changePasswordForm.get('oldPassword').touched
                  "
                >
                  <p
                    class="caption status-danger"
                    *ngIf="changePasswordForm.get('oldPassword').errors?.required"
                  >
                    Old Password is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="changePasswordForm.get('oldPassword').errors?.minlength"
                  >
                    Old Password should contain minimum 7 characters
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-control-group">
                <label class="label" for="input-password">Password:</label>
                <input
                  type="password"
                  nbInput
                  id="input-password"
                  name="password"
                  formControlName="password"
                  placeholder="Password"
                  minlength="7"
                  maxlength="20"
                  fullWidth
                  [status]="
                    changePasswordForm.get('password').touched
                      ? changePasswordForm.get('password').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="
                    changePasswordForm.get('password').invalid &&
                    changePasswordForm.get('password').touched
                  "
                >
                  <p
                    class="caption status-danger"
                    *ngIf="changePasswordForm.get('password').errors?.required"
                  >
                    Password is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="changePasswordForm.get('password').errors?.minlength"
                  >
                    Password should contain minimum 7 characters
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-control-group">
                <label class="label" for="input-re-password">Repeat password:</label>
                <input
                  nbInput
                  type="password"
                  id="input-re-password"
                  name="rePass"
                  formControlName="confirmPassword"
                  placeholder="Confirm Password"
                  minlength="5"
                  maxlength="30"
                  fullWidth
                  [status]="
                    changePasswordForm.get('confirmPassword').touched
                      ? changePasswordForm.get('confirmPassword').invalid ||
                        changePasswordForm.get('password').value !=
                          changePasswordForm.get('confirmPassword').value
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="
                    changePasswordForm.get('confirmPassword').invalid &&
                    changePasswordForm.get('confirmPassword').touched
                  "
                >
                  <p
                    class="caption status-danger"
                    *ngIf="changePasswordForm.get('confirmPassword').errors?.required"
                  >
                    Password confirmation is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="
                      changePasswordForm.get('password').value !=
                        changePasswordForm.get('confirmPassword').value &&
                      !changePasswordForm.hasError('invalidConfirmPassword')
                    "
                  >
                    Password does not match the confirm password.
                  </p>
                </ng-container>
              </div>
            </div>
          </div>

          <br />

          <div class="row">
            <div class="col-md-12 text-right">
              <button type="submit" nbButton status="primary">Change password</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </nb-card-body>
</nb-card>
