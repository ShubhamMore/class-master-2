<nb-card>
  <nb-card-header>
    <button
      title="button"
      class="float-right"
      nbButton
      size="small"
      status="warning"
      (click)="back()"
    >
      Back
    </button>
    <h3 class="">Add {{ budgetForm.value.type | uppercase }}</h3>
  </nb-card-header>
  <nb-card-body>
    <nb-stepper #stepper [linear]="true" [disableStepNavigation]="true">
      <nb-step [stepControl]="budgetForm" label="{{ budgetForm.value.type | uppercase }} Details">
        <form class="" (submit)="budgetFormSubmit()" [formGroup]="budgetForm">
          <div class="row">
            <div class="col-md-4 col-sm-6">
              <div class="form-control-group">
                <label class="label" for="input-type">Type:</label>
                <nb-select
                  id="input-type"
                  name="type"
                  formControlName="type"
                  placeholder="Select Type"
                  fullWidth
                  [status]="
                    budgetForm.get('type').touched
                      ? budgetForm.get('type').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                >
                  <nb-option value="income">INCOME</nb-option>
                  <nb-option value="expense">EXPENSE</nb-option>
                </nb-select>
                <ng-container
                  *ngIf="budgetForm.get('type').invalid && budgetForm.get('type').touched"
                >
                  <p class="caption status-danger" *ngIf="budgetForm.get('type').errors?.required">
                    Type is required!
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-8 col-sm-6">
              <div class="form-control-group">
                <label class="label" for="input-generated-by">Generated By:</label>
                <input
                  type="text"
                  nbInput
                  id="input-generated-by"
                  name="generatedBy"
                  formControlName="generatedBy"
                  placeholder="Generated By"
                  minlength="3"
                  maxlength="30"
                  fullWidth
                  [status]="
                    budgetForm.get('generatedBy').touched
                      ? budgetForm.get('generatedBy').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="
                    budgetForm.get('generatedBy').invalid && budgetForm.get('generatedBy').touched
                  "
                >
                  <p
                    class="caption status-danger"
                    *ngIf="budgetForm.get('generatedBy').errors?.required"
                  >
                    Generated By is required!
                  </p>
                  <p
                    class="caption status-danger"
                    *ngIf="budgetForm.get('generatedBy').errors?.minlength"
                  >
                    Generated By should contain minimum 3 characters
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-title">Title:</label>
                <input
                  type="text"
                  nbInput
                  id="input-title"
                  name="title"
                  formControlName="title"
                  placeholder="Title"
                  fullWidth
                  [status]="
                    budgetForm.get('title').touched
                      ? budgetForm.get('title').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="budgetForm.get('title').invalid && budgetForm.get('title').touched"
                >
                  <p class="caption status-danger" *ngIf="budgetForm.get('title').errors?.required">
                    Title is required!
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-amount">Amount:</label>
                <input
                  type="number"
                  nbInput
                  id="input-amount"
                  name="amount"
                  formControlName="amount"
                  placeholder="Amount"
                  min="0"
                  fullWidth
                  [status]="
                    budgetForm.get('amount').touched
                      ? budgetForm.get('amount').invalid
                        ? 'danger'
                        : 'success'
                      : 'basic'
                  "
                />
                <ng-container
                  *ngIf="budgetForm.get('amount').invalid && budgetForm.get('amount').touched"
                >
                  <p
                    class="caption status-danger"
                    *ngIf="budgetForm.get('amount').errors?.required"
                  >
                    Amount is required!
                  </p>
                  <p class="caption status-danger" *ngIf="budgetForm.get('amount').errors?.min">
                    Enter Valid Amount.
                  </p>
                </ng-container>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-date">Date:</label>
                <input
                  type="date"
                  nbInput
                  id="input-date"
                  name="date"
                  formControlName="date"
                  placeholder="Date"
                  fullWidth
                />
              </div>
              <ng-container
                *ngIf="budgetForm.get('date').invalid && budgetForm.get('date').touched"
              >
                <p class="caption status-danger" *ngIf="budgetForm.get('date').errors?.required">
                  Date is required!
                </p>
              </ng-container>
            </div>
          </div>

          <hr />

          <div class="row">
            <div class="col-md-12 text-right">
              <button nbButton size="small" title="submit">
                <span>Next</span>
                <nb-icon icon="arrow-ios-forward-outline"></nb-icon>
              </button>
            </div>
          </div>
        </form>
      </nb-step>

      <nb-step label="Submit">
        <div class="step-container">
          <div class="table-responsive">
            <table class="table table-bordered">
              <tbody>
                <tr>
                  <th>Type</th>
                  <td>{{ budgetForm.value.type | uppercase }}</td>
                </tr>
                <tr>
                  <th>Generated By</th>
                  <td>{{ budgetForm.value.generatedBy }}</td>
                </tr>
                <tr>
                  <th>Title</th>
                  <td>{{ budgetForm.value.title }}</td>
                </tr>
                <tr>
                  <th>Amount</th>
                  <td>{{ budgetForm.value.amount }}</td>
                </tr>
                <tr>
                  <th>Date</th>
                  <td>{{ dateService.formatDate(budgetForm.value.date) }}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <hr />

          <div class="row">
            <div class="col-md-6 text-left">
              <button title="button" class="" nbButton size="small" (click)="previousStep()">
                <nb-icon icon="arrow-ios-back-outline"></nb-icon>
                <span>prev</span>
              </button>
            </div>
            <div class="col-md-6 text-right">
              <button nbButton size="small" (click)="saveBudget()"><span>Submit</span></button>
            </div>
          </div>
        </div>
      </nb-step>
    </nb-stepper>
  </nb-card-body>
</nb-card>
